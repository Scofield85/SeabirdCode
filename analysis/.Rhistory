qplot(hyp_mean_Temperature,epi_mean_Temperature,data =subset(SUData,site =="SU02"),color = THM_segment)+scale_color_gradientn(colors=topo.colors(5))+geom_text(aes(hyp_mean_Temperature,epi_mean_Temperature,label = SU01$year))
qplot(hyp_mean_Temperature,epi_mean_Temperature,data =subset(SUData,site =="SU02"),color = THM_gradient)+scale_color_gradientn(colors=topo.colors(5))+geom_text(aes(hyp_mean_Temperature,epi_mean_Temperature,label = SU01$year))
head(SUDa)
SUData
head(SUData)
predictorVarables <- c("DCL_magnitude","DCL_depth","THM_segment","UHY_segment","LEP_segment")
predictorVarables
summary(SUData[,predictorVarables])
which.max(SUData$LEP_segment)
SUData[126,]
summary(SUData[-126,predictorVarables])
library(dplyr)
arrange(SUData,UHY_segment)
head(arrange(SUData,UHY_segment),5)
head(arrange(SUData,UHY_segment)[,predictorVarables],5)
?Arrange
?arrange
head(arrange(SUData,desc(UHY_segment))[,predictorVarables],5)
head(arrange(SUData,desc(UHY_segment))[,c("year","site",predictorVarables)],5)
summary(arrange(SUData,desc(UHY_segment))[-c(1:2),c("year","site",predictorVarables)]
)
summary(arrange(SUData,desc(UHY_segment))[-c(1:2),c("year","site",predictorVarables,waterChemistryVariables)]
summary(arrange(SUData,desc(UHY_segment))[-c(1:2),c("year","site",predictorVarables,waterChemistryVariables)])
head(arrange(SUData,desc(hyp_mean_Temperature))[,c("year","site",predictorVarables,waterChemistryVariables)])
library(gridExtra)
library(ggplot2)
require(RMySQL)
require(reshape2)
dbConfig <- list(dbname = "Seabird", username="root", password="XuWenzhaO", host="127.0.0.1")
sqlQuery <- function (sql) {
if(nchar(sql)<1){
stop("wrong sql")
}
conn <- dbConnect(MySQL(), dbname = dbConfig$dbname, username=dbConfig$username, password=dbConfig$password, host=dbConfig$host, port=3306)
result <- dbGetQuery(conn,sql)
dbDisconnect(conn)
return(result)
}
site = "SU01"
fileId_sql <- "SELECT fileId,year(systemUpLoadTime) as year,fileName from summer_meta where stationInfered = 'SU01'"
fileIdDF <- sqlQuery(fileId_sql)
maxDepth_sql = sprintf("Select max(Depth) from summer_data where fileId in (%s)", paste(fileIdDF$fileId,collapse=","))
temperature_Range_sql = sprintf("Select min(Temperature),max(Temperature) from summer_data where fileId in (%s)", paste(fileIdDF$fileId,collapse=","))
maxDepth <- sqlQuery(maxDepth_sql)[1,1]
temperatureRange <- as.numeric(sqlQuery(temperature_Range_sql)[,1:2])
plotList <- list()
for(i in 1:nrow(fileIdDF)){
id <- fileIdDF$fileId[i]
name <- paste(fileIdDF$year[i],basename(fileIdDF$fileName[i]))
sql <- sprintf("Select * from summer_data where fileId = %s order by 'index'",  id)
data <- sqlQuery(sql)
# data <- melt(data,id.vars = ("index","Depth","id","fileId")))
p <- qplot(Temperature,-Depth,data=data,color=I("red"))+ylim(c(-maxDepth,0))+xlim(temperatureRange)+ggtitle(name)
plotList[[as.character(id)]] <- p
}
args.list <- c(plot.list,list(ncol=2,nrow=13))
args.list <- c(plotList,list(ncol=2,nrow=13))
do.call(grid.arrange, args.list)
length(plotList)
args.list <- c(plotList,list(ncol=2,nrow=16))
do.call(grid.arrange, args.list)
png("~/Desktop/test.png")
args.list <- c(plotList,list(nrow=2,ncol=16))
print(do.call(grid.arrange, args.list))
dev.off()
png("~/Desktop/test.png",width=2000,height=500)
print(do.call(grid.arrange, args.list))
dev.off()
site = "SU01"
fileId_sql <- "SELECT fileId,year(systemUpLoadTime) as year,fileName from summer_meta where stationInfered = 'SU01'"
fileIdDF <- sqlQuery(fileId_sql)
maxDepth_sql <- sprintf("Select max(Depth) from summer_data where fileId in (%s)", paste(fileIdDF$fileId,collapse=","))
temperature_range_sql <- sprintf("Select min(Temperature),max(Temperature) from summer_data where fileId in (%s)", paste(fileIdDF$fileId,collapse=","))
fluorescence_range_sql <- sprintf("Select min(Fluorescence),max(Fluorescence) from summer_data where fileId in (%s)", paste(fileIdDF$fileId,collapse=","))
maxDepth <- sqlQuery(maxDepth_sql)[1,1]
temperatureRange <- as.numeric(sqlQuery(temperature_Range_sql)[,1:2])
fluorescenceRange <- as.numeric(sqlQuery(fluorescence_range_sql)[,1:2])
plotList_temperature <- list()
plotList_fluorescence <- list()
for(i in 1:nrow(fileIdDF)){
id <- fileIdDF$fileId[i]
name <- paste(fileIdDF$year[i],basename(fileIdDF$fileName[i]))
sql <- sprintf("Select * from summer_data where fileId = %s order by 'index'",  id)
data <- sqlQuery(sql)
# data <- melt(data,id.vars = ("index","Depth","id","fileId")))
p_temperature <- qplot(Temperature,-Depth,data=data,color=I("red"))+ylim(c(-maxDepth,0))+xlim(temperatureRange)+ggtitle(name)
plotList_temperature[[as.character(id)]] <- p_temperature
p_fluorescence <- qplot(Fluorescence,-Depth,data=data,color=I("red"))+ylim(c(-maxDepth,0))+xlim(fluorescenceRange)+ggtitle(name)
plotList_fluorescence[[as.character(id)]] <- p_fluorescence
}
args.list <- c(plotList_temperature,list(nrow=2,ncol=16))
png(sprintf("~/Desktop/Temperature.png"),width = 2000,height = 500)
print(do.call(grid.arrange, args.list))
dev.off()
args.list <- c(plotList_fluorescence,list(nrow=2,ncol=16))
png(sprintf("~/Desktop/Fluorescence.png"),width = 2000,height = 500)
print(do.call(grid.arrange, args.list))
dev.off()
getwd()
setwd("~/Developer/Seabird/SeabirdCode/analysis/")
feature <- read.csv("../../output/testFeature.csv")
validStation <- read.csv("../../input/station_loc.csv")
waterChemistryData <- read.csv("../../output/waterFeature.csv")[,-1]
feature$lake <- addLake(feature$site)
feature <- cbind(feature,waterChemistryData)
addLake <- function(site){
return(strtrim(site,2))
}
feature <- read.csv("../../output/testFeature.csv")
validStation <- read.csv("../../input/station_loc.csv")
waterChemistryData <- read.csv("../../output/waterFeature.csv")[,-1]
feature$lake <- addLake(feature$site)
feature <- cbind(feature,waterChemistryData)
feature_SU <- filter(feature,lake=="SU")
validStation$Station <- as.character(validStation$Station)
feature$lake
feature <- read.csv("../../output/testFeature.csv")
validStation <- read.csv("../../input/station_loc.csv")
waterChemistryData <- read.csv("../../output/waterFeature.csv")[,-1]
feature$lake <- addLake(feature$site)
feature <- cbind(feature,waterChemistryData)
feature_SU <- filter(feature,lake=="SU")
names(feature)
library(dplyr)
feature_SU <- filter(feature,lake=="SU")
validStation$Station <- as.character(validStation$Station)
validStation$bathymetry <- retriveBathyMetriy(validStation,"../../input/superior_lld/superior_lld.asc")
retriveBathyMetriy <- function(spData,sourceMapFile){
require(raster)
spData$Long <- -spData$Long
coordinates(spData)=~Long+Lat
# spData must be a sp data class
bathymetry_raster = raster(sourceMapFile)
bathymetry <- extract(bathymetry_raster,spData)
return(bathymetry)
}
validStation$bathymetry <- retriveBathyMetriy(validStation,"../../input/superior_lld/superior_lld.asc")
feature_ER <- merge(feature_ER,validStation,by.x = "site", by.y = "Station")
feature_SU <- merge(feature_SU,validStation,by.x = "site", by.y = "Station")
head(feature_SU)
library(GGally)
temp.gly <- glyphs(feature_SU, "Long", "year", "Latitude", "THM_gradient", height=2.5)
temp.gly <- glyphs(feature_SU, "Long", "year", "Lat", "THM_gradient", height=2.5)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_path() +
theme_bw() +
labs(x = "", y = "")
temp.gly <- glyphs(subset(feature_SU,THM_gradient>0), "Long", "year", "Lat", "THM_gradient", height=2.5)
temp.gly
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_path() +
theme_bw() +
labs(x = "", y = "")
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +
theme_bw() +
labs(x = "", y = "")
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +
theme_bw() +
labs(x = "", y = "")
head(feature_SU)
temp.gly <- glyphs(subset(feature_SU,THM_segment>0 & THM_segment<100), "Long", "year", "Lat", "THM_segment", height=2.5)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +
theme_bw() +
labs(x = "", y = "")
temp.gly <- glyphs(subset(feature_SU,THM_segment>0 & THM_segment<100), "Long", "year", "Lat", "THM_segment", height=2.5,width = 2.5)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +
theme_bw() +
labs(x = "", y = "")
temp.gly <- glyphs(subset(feature_SU,THM_segment>0 & THM_segment<100), "Long", "year", "Lat", "THM_segment", height=2.5,width = 1)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +
theme_bw() +
labs(x = "", y = "")
temp.gly <- glyphs(subset(feature_SU,THM_segment>0 & THM_segment<100), "Long", "year", "Lat", "THM_segment", height=1,width = 1)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +
theme_bw() +
labs(x = "", y = "")
temp.gly <- glyphs(subset(feature_SU,THM_segment>0 & THM_segment<100), "Long", "year", "Lat", "THM_segment", height=0.5,width = 0.5)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +
theme_bw() +
labs(x = "", y = "")
temp.gly <- glyphs(subset(feature_SU,THM_segment>0 & THM_segment<100), "Long", "year", "Lat", "THM_segment", height=0.25,width = 0.25)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +
theme_bw()
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +
theme_bw() +
labs(x = "", y = "")
?add_ref_lines()
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +geom_point()
theme_bw() +
labs(x = "", y = "")
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +geom_point()+
theme_bw() +
labs(x = "", y = "")
temp.gly <- glyphs(subset(feature_SU,THM_segment>0 & THM_segment<100), "Long", "year", "Lat", "THM_segment", height=0.25,width = 0.5)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +geom_point()+
theme_bw() +
labs(x = "", y = "")
temp.gly
head(temp.gly)
temp.gly <- glyphs(subset(feature_SU,THM_segment>0 & THM_segment<100), "Long", "year", "Lat", "num_segment", height=0.25,width = 0.5)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +geom_point()+
theme_bw() +
labs(x = "", y = "")
temp.gly <- glyphs(subset(feature_SU,DCL_depth>0 & DCL_depth<100), "Long", "year", "Lat", "DCL_depth", height=0.25,width = 0.5)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +geom_point()+
theme_bw() +
labs(x = "", y = "")
temp.gly <- glyphs(subset(feature_SU,THM_segment>0 & THM_segment<100), "Long", "year", "Lat", "num_segment", height=0.25,width = 0.5)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +geom_point()+
theme_bw() +
labs(x = "", y = "")
temp.gly <- glyphs(subset(feature_SU,DCL_depth>0 & DCL_depth<100), "Long", "year", "Lat", "DCL_depth", height=0.25,width = 0.5)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +geom_point()+
theme_bw() +
labs(x = "", y = "")
?glyphs
ggmap()
library(ggmap)
temp.gly <- glyphs(subset(feature_SU,DCL_magnitude>0 & DCL_magnitude<100), "Long", "year", "Lat", "DCL_magnitude", height=0.25,width = 0.5)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +geom_point()+
theme_bw() +
labs(x = "", y = "")
unique(feature_SU$site)
as.character(unique(feature_SU$site))
siteList <- as.character(unique(feature_SU$site))
yearList <- 1996:201
yearList <- 1996:2013
fullFeature <- expand.grid(site <- siteList,year <- yearList)
head(fullFeature)
names(fullFeature) <- c("Site","Year")
?merge
fullFeature <- merge(fullFeature,feature_SU,by.x = Year,by.y = year,all.x=TRUE)
fullFeature <- merge(fullFeature,feature_SU,by.x = "Year",by.y = "year",all.x=TRUE)
head(fullFeature)
temp.gly <- glyphs(subset(fullFeature,DCL_depth>0 & DCL_depth<100), "Long", "year", "Lat", "DCL_depth", height=0.25,width = 0.5)
temp.gly <- glyphs(fullFeature, "Long", "year", "Lat", "DCL_depth", height=0.25,width = 0.5)
head(fullFeature)
temp.gly <- glyphs(na.omit(fullFeature), "Long", "year", "Lat", "DCL_depth", height=0.25,width = 0.5)
nrow(na.omit(fullFeature))
nrow(fullFeature)
summary(fullFeature)
names(fullFeature) <- c("Site","Year")
fullFeature <- expand.grid(site <- siteList,year <- yearList)
fullFeature <- merge(fullFeature,feature_SU,by.x = c("Year","Site"),by.y = c("year","site"),all.x=TRUE)
names(feature_SU)
head(fullFeature)
names(fullFeature) <- c("Site","Year")
fullFeature <- merge(fullFeature,feature_SU,by.x = c("Year","Site"),by.y = c("year","site"),all.x=TRUE)
dim(fullFeature)
temp.gly <- glyphs(subset(fullFeature,DCL_depth>0 & DCL_depth<100), "Long", "year", "Lat", "DCL_depth", height=0.25,width = 0.5)
temp.gly <- glyphs(na.omit(fullFeature), "Long", "year", "Lat", "DCL_depth", height=0.25,width = 0.5)
temp.gly <- glyphs(fullFeature, "Long", "year", "Lat", "DCL_depth", height=0.25,width = 0.5)
temp.gly <- glyphs(fullFeature[1:20], "Long", "year", "Lat", "DCL_depth", height=0.25,width = 0.5)
temp.gly <- glyphs(fullFeature[1:20,], "Long", "year", "Lat", "DCL_depth", height=0.25,width = 0.5)
temp.gly <- glyphs(fullFeature[1:10,], "Long", "year", "Lat", "DCL_depth", height=0.25,width = 0.5)
temp.gly <- glyphs(subset(fullFeature,DCL_depth>0 & DCL_depth<100), "Long", "Year", "Lat", "DCL_depth", height=0.25,width = 0.5)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +geom_point()+
theme_bw() +
labs(x = "", y = "")
dim(subset(fullFeature,DCL_magnitude>0 & DCL_magnitude<100))
dim(na.omit(subset(fullFeature,DCL_magnitude>0 & DCL_magnitude<100)))
fullFeature$DCL_magnitude <- ifelse(fullFeature$DCL_magnitude<0,NA,fullFeature$DCL_magnitude)
fullFeature$DCL_magnitude <- ifelse(fullFeature$DCL_magnitude>100,NA,fullFeature$DCL_magnitude)
temp.gly <- glyphs(fullFeature, "Long", "Year", "Lat", "DCL_depth", height=0.25,width = 0.5)
temp.gly <- glyphs(fullFeature[1:10,], "Long", "year", "Lat", "DCL_magnitude", height=0.25,width = 0.5)
temp.gly <- glyphs(fullFeature[1:10,], "Long", "year", "Lat", "DCL_magnitude", height=0.25,width = 0.5)
temp.gly <- glyphs(fullFeature[1:10,], "Long", "Year", "Lat", "DCL_magnitude", height=0.25,width = 0.5)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +geom_point()+
theme_bw() +
labs(x = "", y = "")
temp.gly <- glyphs(fullFeature, "Long", "Year", "Lat", "DCL_magnitude", height=0.25,width = 0.5)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_line() +geom_point()+
theme_bw() +
labs(x = "", y = "")
library(ggplot2)
library(ggmap)
?bbox
bbox <- make_bbox(Long, Lat, fullFeature, f = 0.3)
map <- ggmap(get_map(bbox,source="stamen"))
map
fullFeature$Long <- -fullFeature$Long
map <- ggmap(get_map(bbox,source="stamen"))
bbox <- make_bbox(Long, Lat, fullFeature, f = 0.3)
map <- ggmap(get_map(bbox,source="stamen"))
map
map+geom_path(aes(gx, gy, group = gid),data=temp.gly)+add_ref_lines(temp.gly, color = "grey90") +add_ref_boxes(temp.gly, color = "grey90") +
map+geom_path(aes(gx, gy, group = gid),data=temp.gly)+add_ref_lines(temp.gly, color = "grey90") +add_ref_boxes(temp.gly, color = "grey90")
temp.gly <- glyphs(fullFeature, "Long", "Year", "Lat", "DCL_magnitude", height=0.25,width = 0.5)
map+geom_path(aes(gx, gy, group = gid),data=temp.gly)+add_ref_lines(temp.gly, color = "grey90") +add_ref_boxes(temp.gly, color = "grey90")
map
map+geom_path(aes(gx, gy, group = gid),data=temp.gly)
map+geom_path(aes(gx, gy, group = gid),data=temp.gly)+ add_ref_lines(temp.gly, color = "grey90")
head(temp.gly)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_path() +
theme_bw() +
labs(x = "", y = "")
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_path() +
theme_bw() +
labs(x = "", y = "")+map
?add_ref_lines
map+geom_path(aes(gx, gy, group = gid),data=temp.gly)+ add_ref_lines(temp.gly, color = "grey90")
map+geom_path(aes(gx, gy, group = gid),data=temp.gly)
map+geom_line\(aes(gx, gy, group = gid),data=temp.gly)
map+geom_line(aes(gx, gy, group = gid),data=temp.gly)
?rename
rename(fullFeature,Long = long)
rename(fullFeature,"Long" = "long")
rename(fullFeature,Long = "long")
rename(fullFeature,"Long" = long)
fullFeature <- rename(fullFeature,long = Long,lat=Lat)
map+geom_path(aes(gx, gy, group = gid),data=temp.gly)+ add_ref_lines(temp.gly, color = "grey90")
fullFeature <- rename(fullFeature,lon = long)
map+geom_path(aes(gx, gy, group = gid),data=temp.gly)+ add_ref_lines(temp.gly, color = "grey90")
temp.gly <- glyphs(fullFeature, "lon", "Year", "lat", "DCL_magnitude", height=0.25,width = 0.5)
map+geom_path(aes(gx, gy, group = gid),data=temp.gly)+ add_ref_lines(temp.gly, color = "grey90")
?add_ref_lines
map+geom_path(aes(gx, gy, group = gid),data=temp.gly)+ add_ref_lines(temp.gly, color = "grey90")
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_path() +
theme_bw() +
labs(x = "", y = "")
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_path() + geom_point()+
theme_bw() +
labs(x = "", y = "")
temp.gly <- glyphs(fullFeature, "lon", "Year", "lat", "DCL_Depth", height=0.25,width = 0.5)
temp.gly <- glyphs(fullFeature, "lon", "Year", "lat", "DCL_depth", height=0.25,width = 0.5)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_path() + geom_point()+
theme_bw() +
labs(x = "", y = "")
fullFeature$DCL_depth <- ifelse(fullFeature$depth<0,NA,fullFeature$DCL_depth)
fullFeature$DCL_depth <- ifelse(fullFeature$DC_depth<0,NA,fullFeature$DCL_depth)
fullFeature$DCL_depth <- ifelse(fullFeature$DCL_depth<0,NA,fullFeature$DCL_depth)
temp.gly <- glyphs(fullFeature, "lon", "Year", "lat", "DCL_depth", height=0.25,width = 0.5)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_path() + geom_point()+
theme_bw() +
labs(x = "", y = "")
fullFeature$THM_segment <- ifelse(fullFeature$THM_segment<0,NA,fullFeature$THM_segment)
temp.gly <- glyphs(fullFeature, "lon", "Year", "lat", "THM_segment", height=0.25,width = 0.5)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_path() + geom_point()+
theme_bw() +
labs(x = "", y = "")
max(fullFeature$THM_segment)
max(fullFeature$THM_segment,na.rm = T)
which.max(fullFeature$THM_segment,na.rm = T)
which.max(fullFeature$THM_segment)
which.max(fullFeature$THM_segment)
fullFeature[8,1]
fullFeature[8,]
fullFeature[8,"THM_segment"] <- NA
temp.gly <- glyphs(fullFeature, "lon", "Year", "lat", "THM_segment", height=0.25,width = 0.5)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_path() + geom_point()+
theme_bw() +
labs(x = "", y = "")
fullFeature$THM_segment <- ifelse(fullFeature$THM_segment>100,NA,fullFeature$THM_segment)
temp.gly <- glyphs(fullFeature, "lon", "Year", "lat", "THM_segment", height=0.25,width = 0.5)
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_path() + geom_point()+
theme_bw() +
labs(x = "", y = "")
subset(fullFeature,site="SU21")
subset(fullFeature,site=="SU21")
summary(fullFeature$THM_segment)
subset(fullFeature,site=="SU22" & Year = 2000)
subset(fullFeature,site=="SU22" & Year == 2000)
subset(fullFeature,site=="SU22")
subset(temp.gly,site=="SU22")
qplot(gx,gy,data=temp.gly)
qplot(gx,gy,data=as.data.frame(temp.gly))
plot(gy~gx,data=temp.gly)
plot(gy~gx,data=subse(temp.gly,Site=="SU22"))
plot(gy~gx,data=subset(temp.gly,Site=="SU22"))
qplot(gy~gx,data=subset(temp.gly,Site=="SU22"))+geom_line()
qplot(gy~gx,data=subset(temp.gly,Site=="SU22"))
qplot(gx,gy,data=subset(temp.gly,Site=="SU22"))+geom_line()
qplot(gx,gy,data=subset(temp.gly,Site=="SU22"))+geom_path()
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_path() + geom_point()+
theme_bw() +
labs(x = "", y = "")
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_path()
theme_bw() +
labs(x = "", y = "")
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_path()+
theme_bw() +
labs(x = "", y = "")
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_path() + geom_point()+
theme_bw() +
labs(x = "", y = "")
qplot(gx,gy,data=subset(temp.gly,Site=="SU22"))+geom_path()
qplot(gx,gy,data=temp.gly)+geom_path()
qplot(gx,gy,data=temp.gly)+geom_point()
ggplot(temp.gly, aes(gx, gy, group = gid)) +
geom_path() + geom_point()+
theme_bw() +
labs(x = "", y = "")
subset(temp.gly,site=="SU17")
subset(temp.gly,site=="SU22")
temp.gly[114,]
fullFeature[fullFeature$Site=="SU22","lon"] <- -91.75
fullFeature[fullFeature$Site=="SU22","lat"] <- 46.8
temp.gly <- glyphs(fullFeature, "lon", "Year", "lat", "THM_segment", height=0.25,width = 0.5)
temp.gly[114,]
ggplot(temp.gly, ggplot2::aes(gx, gy, group = gid)) +
add_ref_lines(temp.gly, color = "grey90") +
add_ref_boxes(temp.gly, color = "grey90") +
geom_path() + geom_point()+
theme_bw() +
labs(x = "", y = "")
temp.gly[115,]
subset(temp.gly,Site=="SU22" & Year = 2001)
subset(temp.gly,Site=="SU22" & Year == 2001)
summary(temp.gly$THM_segment)
